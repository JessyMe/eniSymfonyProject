{% extends 'layout.html.twig' %}
{%  block style %}<link rel="stylesheet" href="{{ asset('css/style_home.css') }}">{% endblock %}
{% block main %}

    {{ form_start(sortieForm) }}
    <div class="formHome row">
        <div class="formHome col-sm-1 col-lg-5">

            {{ form_row(sortieForm.campus) }}

            {{ form_row(sortieForm.nom) }}
            <div class="form-group">
                <label for="">Entre</label>
                {{ form_row(sortieForm.datedebut) }}
            </div>
            <div class="form-group">
                <label for="">et</label>
                {{ form_row(sortieForm.datefin) }}
            </div>

        </div>
        <div class="formHome-col col-sm-1 col-lg-4">
            {{ form_row(sortieForm.SortieOrganisateur) }}
            {{ form_row(sortieForm.SortieInscrit) }}
            {{ form_row(sortieForm.SortieNonInscrit) }}
            {{ form_row(sortieForm.SortiePassee) }}
        </div>
        <div class="col-sm-1 col-lg-2">
            <div>
                {% if (user) %}
                    Date du jour : {{ 'now' | date('d/m/y') }}
                    Participant : {{ app.user.pseudo }}
                {% endif %}
            </div>
            <button type="submit" class="btn btn-dark">Rechercher</button>
        </div>

    </div>
    {{ form_end(sortieForm) }}


    <table class="table">
        <thead>
        <tr>
            <th scope="col">Nom de la sortie</th>
            <th scope="col">Date de la sortie</th>
            <th scope="col">Clôture</th>
            <th scope="col">Inscrits/places</th>
            <th scope="col">Etat</th>
            <th scope="col">Inscrit</th>
            <th scope="col">Organisateur</th>
            <th scope="col">Actions</th>
        </tr>
        </thead>
        <tbody>
        {% for sortie in sorties %}
        <tr>
            <td>{{ sortie.nom }}</td>
            <td>{{ sortie.datedebut|date('d/m/y') }}</td>
            <td>{{ sortie.datecloture|date('d/m/y') }}</td>
            <td>.../{{ sortie.nbInscriptionMax }}</td>
            <td>{{ sortie.etat.libelle }}</td>
            <td>x</td>
            <td>{{ sortie.organisateur.pseudo }}</td>
            <td>{% if(sortie.datecloture > "now" and sortie.etat.id == 2) %}
                    <a href="{{ path('sortie_inscription', {'id': sortie.id}) }}">S'inscrire</a>
                {% endif %}
                {% if(sortie.datedebut > "now") %}
                    <a href="{{ path('sortie_desister', {'id': sortie.id}) }}">Se désister</a>
            {% endif %}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>

<button type="primary-button"><a href="{{ path('sortie_add')}}"> Nouvelle sortie</a></button>
{% endblock %}